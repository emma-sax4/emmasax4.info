<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="apple-touch-icon" sizes="120x120" href="/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon/android-chrome-96x96.png">
  <link rel="icon" type="image/png" sizes="48x48" href="/assets/favicon/favicon-48x48.png">
  <link rel="icon" type="image/png" sizes="196x196" href="/assets/favicon/favicon-196x196.png">
  <link rel="manifest" href="/assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#1144ef">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="msapplication-TileImage" content="/assets/favicon/mstile-150x150.png">
  <meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <link
    href="https://emmasax4.info/feed.xml"
    title="Emma Sax's Blog"
    rel="alternate"
    type="application/rss+xml"
  >
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
    crossorigin="anonymous"
  >
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:400,700"
    rel="stylesheet"
    type="text/css"
  >
  <link
    rel="stylesheet"
    href="/assets/css/style.css"
  >
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Emma Sax | Time Zones, UTC, and Javascript‚Ä¶ Oh My!</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Emma Sax | Time Zones, UTC, and Javascript‚Ä¶ Oh My!" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="On my latest blog post, I wanted to try something new. When publishing, I wanted to publish on a future date (specifically at midnight the next day). I set up the date of the post to include the next day, and then planned to go onto Travis at midnight to build the newest version of the site‚Ä¶ with the new blog post. And then I continued working on my website for the night." />
<meta property="og:description" content="On my latest blog post, I wanted to try something new. When publishing, I wanted to publish on a future date (specifically at midnight the next day). I set up the date of the post to include the next day, and then planned to go onto Travis at midnight to build the newest version of the site‚Ä¶ with the new blog post. And then I continued working on my website for the night." />
<link rel="canonical" href="https://emmasax4.info/blog/posts/time-zones-utc-and-javascript-oh-my/" />
<meta property="og:url" content="https://emmasax4.info/blog/posts/time-zones-utc-and-javascript-oh-my/" />
<meta property="og:site_name" content="Emma Sax" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-07T06:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Time Zones, UTC, and Javascript‚Ä¶ Oh My!" />
<meta name="google-site-verification" content="v04az8eo-0UcZrWCJr7SKAvM6hw90qTCBQoKx3PlXCA" />
<meta name="msvalidate.01" content="89B2B19FF966341B78EF64EDADE6DF81" />
<meta name="yandex-verification" content="c2741887f8c30dd1" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://emmasax4.info/blog/posts/time-zones-utc-and-javascript-oh-my/"},"url":"https://emmasax4.info/blog/posts/time-zones-utc-and-javascript-oh-my/","headline":"Time Zones, UTC, and Javascript‚Ä¶ Oh My!","dateModified":"2020-02-07T06:00:00+00:00","description":"On my latest blog post, I wanted to try something new. When publishing, I wanted to publish on a future date (specifically at midnight the next day). I set up the date of the post to include the next day, and then planned to go onto Travis at midnight to build the newest version of the site‚Ä¶ with the new blog post. And then I continued working on my website for the night.","datePublished":"2020-02-07T06:00:00+00:00","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

  <header>
  <nav class="navbar navbar-expand-md navbar-dark">
    <a class="navbar-brand mb-0" href="https://emmasax4.info" target="_self">
      <img src="/assets/images/logos/e-logo-white-40.png" width="30" height="30"
        class="d-inline-block align-top" alt="E logo"
      > Emma Sax
    </a>

    <button class="navbar-toggler" type="button" data-toggle="collapse"
      data-target="#navbar-links" aria-controls="navbar-links"
      aria-expanded="false" aria-label="Toggle navigation">
      <span data-feather="menu"></span>
      <span data-feather="x"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbar-links">
      <ul class="navbar-nav ml-auto mt-2 mt-md-0">
        

        
          
            

            

            <li class="nav-item ">
              <a class="nav-link" href="/">Home
                
              </a>
            </li>
          
        
          
            

            

            <li class="nav-item ">
              <a class="nav-link" href="/about-me/">About Me
                
              </a>
            </li>
          
        
          
            

            

            <li class="nav-item ">
              <a class="nav-link" href="/around-town/">Around Town
                
              </a>
            </li>
          
        
          
        
          
        
          
        
          
            

            

            <li class="nav-item active">
              <a class="nav-link" href="/blog">Blog
                
                  <span class="sr-only">(current)</span>
                
              </a>
            </li>
          
        
          
        
          
        
          
            

            

            <li class="nav-item ">
              <a class="nav-link" href="/contact-me/">Contact Me
                
              </a>
            </li>
          
        
      </ul>
    </div>
  </nav>
</header>


  <body>
    <main class="container">
      <div class="row">
  <div class="col col-12 col-md-2 text-center">
    <div class="container" style="padding-bottom: 1rem;">
  <a href="/blog" class="btn btn-lg btn-outline-secondary">All Posts</a>
</div>


<div class="text-center" style="margin-bottom: .5rem;">
  <a href="/feed.xml" target="_blank" class="link-icon-rss">
  <i data-feather="rss"></i>
</a>

</div>

<div class="text-center" style="margin-bottom: .5rem;">
  

  
  <span class="post-meta">
    <i style="width: 20px; height: 20px;" data-feather="tag"></i>
    
      <a href="/blog/tech/">
        tech
      </a>
      
    
  </span>




</div>

<div class="text-center" style="margin-bottom: 1rem;">
  <span class="post-meta">
    Read time: 12 minutes
  </span>
</div>

  </div>

  <div class="col col-12 col-md-10">
    <h1 style="padding-bottom: .75rem;">
  <div class="text-center">
    
      Time Zones, UTC, and Javascript... Oh My!
    
  </div>

  <div class="text-center" style="margin-top: -.5rem;">
    
    
    
      <span class="date-meta" style="font-style: italic;">2020-02-07 06:00:00 +0000</span>
    
  </div>
</h1>

    <div class="page-body">
      <p>On my latest blog post, I wanted to try something new. When publishing, I wanted to publish on a future date (specifically at midnight the next day). I set up the date of the post to include the next day, and then planned to go onto Travis at midnight to build the newest version of the site‚Ä¶ with the new blog post. And then I continued working on my website for the night.</p>

<p>But what ended up happening was Travis CI built on my <code class="highlighter-rouge">release</code> branch at 6:15pm‚Ä¶ and suddenly my new blog post was live üò±! What happened? Well, Travis CI by default runs in UTC. So, since 6:00pm in CST is midnight in UTC, Travis CI determined it was time to publish the blog post. I quickly reverted that commit on my <code class="highlighter-rouge">master</code> branch to hide the new post once again, and then worked to find a solution to make Travis CI behave for the remainder of the night.</p>

<p>What I ended up finding was this. By adding these lines to the <code class="highlighter-rouge">.travis.yml</code> file, we can override Travis CI‚Äôs default time zone and have it bundle in CST.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">before_install</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">export TZ=America/Chicago</span>
</code></pre></div></div>

<p>I thought I would be satisfied with this. I develop my site in CST (or CDT in the summer), and now Travis will also bundle in that time zone. But, after more thought, I realized that this is really just a bandaid fix ü§ï. What if I move across the country and now live in a different time zone permanently? What if I‚Äôm traveling internationally (say in France), and I‚Äôm blogging while I‚Äôm there. I‚Äôm no longer going to be thinking in terms of <code class="highlighter-rouge">America/Chicago</code> time zone‚Ä¶ say I publish a blog post at 12pm noon in France. When I get home to Minneapolis, should the blog post still show up as having been published at 12pm noon? Or should it properly show a 6‚Äì7 hour time difference?</p>

<p>So after a lot of thinking, I decided that the best (and most sustainable) way to design a website is so that all dates/times are UTC in the database (Jekyll doesn‚Äôt have a DB, so just in the HTML, <code class="highlighter-rouge">feed.xml</code>, and <code class="highlighter-rouge">sitemap.xml</code>). Then, we can convert all UTC date/times to become in a user‚Äôs local time when they navigate to my site ‚è±.</p>

<h2 id="the-goal">The Goal</h2>

<p>Time zones are complicated. I‚Äôve dabbled with them a little bit, but they tend to make my head spin üí´. So, I made hefty goal for myself ü•¥. When I publish a blog post, I can specify the publish date/time in <em>my</em> local time zone. Jekyll will build the blog post as having been published at the corresponding UTC time. And when a reader looks at the blog post on the website, it‚Äôll give the date/time in their local time zone (which may be <em>my</em> time zone, but it could also be different).</p>

<p>Let‚Äôs look at an example. I publish a blog post at 10:15pm in CST on Jan. 17, 2020:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2020-01-17 22:15:00 -0600
</code></pre></div></div>

<p>Jekyll will compile and store the blog post as having been published in UTC (notice the date change):</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2020-01-18 04:15:00 +0000
</code></pre></div></div>

<p>But when a reader looks at the blog post online, it will show in their local time zone (I normally hide the specific times when showing publishing dates):</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>### CST - Minnesota
January 17, 2020 22:15

### PST - California
January 17, 2020 20:15

### CEST - France
January 18, 2020 05:15
</code></pre></div></div>

<p>Most of the time, I publish my blog posts at midnight on a specific date. This means that to everybody in <code class="highlighter-rouge">America/Chicago</code> and east of me, the date should be that specific date. But technically, to everybody west, the blog post went live on the day <em>before</em>.</p>

<p>So, with this as my final goal, I went ahead to try to implement this in five steps:</p>

<h3 id="1Ô∏è-the-entire-jekyll-site-must-build-in-utc">1Ô∏è. The entire Jekyll site must build in UTC</h3>

<p>This was easy. I set the following in my <code class="highlighter-rouge">_config.yml</code>:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">timezone</span><span class="pi">:</span> <span class="s">UTC</span>
</code></pre></div></div>

<p>I also took this opportunity to remove the <code class="highlighter-rouge">export TZ=America/Chicago</code> from my <code class="highlighter-rouge">.travis.yml</code>, since now the Jekyll site and Travis CI will naturally be on the same wavelength.</p>

<h3 id="2Ô∏è-add-the-specific-datetime-of-each-blog-posts-publish-time">2Ô∏è. Add the specific date/time of each blog posts‚Äô publish time</h3>

<p>This was also pretty easy. You can just add the date to the front matter of each blog post:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">date</span><span class="pi">:</span> <span class="s">2020-01-17 22:15:00 -0600</span>
</code></pre></div></div>

<p>You can specify the time the post should be published as well, although, as I stated above, I normally just use <code class="highlighter-rouge">00:00:00</code>, or midnight. For what I‚Äôm working with, the last part is important. That‚Äôs the time zone offset. In Minnesota, that‚Äôll be <code class="highlighter-rouge">-0600</code> in the winter time (CST), or <code class="highlighter-rouge">-0500</code> in the summer (CDT)‚ÄîI always used to get those two mixed up. But, I‚Äôve decided that I want this to be easy for me to use going forward‚Ä¶ so I should always write the date/time as I‚Äôm looking at my clock (in 24 hour time of course) with my current time zone offset üìù.</p>

<h3 id="3Ô∏è-jekyll-will-store-the-blog-post-as-being-published-in-utc">3Ô∏è. Jekyll will store the blog post as being published in UTC</h3>

<p>When I put both of these pieces together, the result was immediate. As soon as I ran <code class="highlighter-rouge">jekyll serve</code> on my website, I noticed that the <code class="highlighter-rouge">feed.xml</code> and <code class="highlighter-rouge">sitemap.xml</code> label the published date/time as in UTC! Yes! Nice and quick.</p>

<h3 id="4Ô∏è-show-the-users-the-published-datetime-in-their-local-time-zones">4Ô∏è. Show the users the published date/time in their local time zones</h3>

<p>This was by far the most challenging part. I played with a Jekyll plugin first, to see if there was an easy way to convert the UTC date/time to be in a different time zone. This would‚Äôve worked, if I wanted to hard-code the new time zone (which defeats the purpose of it being flexible to the readers‚Äô location). So, after much googling, I realized the only good way to understand the readers‚Äô location and time zone offset is to use Javascript. Yay‚Ä¶. üò∞</p>

<p>I‚Äôm not really a Javascript person. But, I jumped in anyway, and wanted to find a solution. Using some loop syntax from another slice of Javascript I use (read more about that <a href="/blog/posts/opening-links-in-new-tabs-via-javascript/">here</a>), I started typing away. I want the Javascript to go through the HTML, find all of the dates, and then convert them to the readers‚Äô local time and print that back out again.</p>

<p>The entire script locates all of the HTML elements with the class <code class="highlighter-rouge">date-meta</code> (assuming that it is indeed a UTC date), and then Javascript makes it easy to change time zones:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">January</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">February</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">March</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">April</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">May</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">June</span><span class="dl">'</span><span class="p">,</span>
                  <span class="dl">'</span><span class="s1">July</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">August</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">September</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">October</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">November</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">December</span><span class="dl">'</span>
<span class="p">];</span>
<span class="kd">var</span> <span class="nx">dateArray</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">2020-01-18 04:15:00 +0000</span><span class="dl">'</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/</span><span class="se">[^</span><span class="sr">0-9</span><span class="se">]</span><span class="sr">/</span><span class="p">);</span>
<span class="c1">//  localDate = Fri Jan 17 2020 22:15:00 GMT-0600 (Central Standard Time)</span>
<span class="kd">var</span> <span class="nx">localDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span>
  <span class="nb">Date</span><span class="p">.</span><span class="nx">UTC</span><span class="p">(</span><span class="nx">dateArray</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
<span class="p">);</span>
<span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">localDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span> <span class="c1">// 17</span>
<span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">localDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span> <span class="c1">// 2020</span>
<span class="kd">var</span> <span class="nx">monthIndex</span> <span class="o">=</span> <span class="nx">localDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span> <span class="c1">// 0</span>
<span class="k">return</span> <span class="nx">monthNames</span><span class="p">[</span><span class="nx">monthIndex</span><span class="p">]</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">day</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">, </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">year</span><span class="p">;</span> <span class="c1">// January 17, 2020</span>
</code></pre></div></div>

<p>All together, this now looks like this:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
  <span class="kd">function</span> <span class="nx">showDatesInLocalTime</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">dates</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="dl">'</span><span class="s1">date-meta</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">January</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">February</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">March</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">April</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">May</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">June</span><span class="dl">'</span><span class="p">,</span>
                      <span class="dl">'</span><span class="s1">July</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">August</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">September</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">October</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">November</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">December</span><span class="dl">'</span>
    <span class="p">];</span>

    <span class="k">for</span><span class="p">(</span><span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">counter</span> <span class="o">&lt;</span> <span class="nx">dates</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">counter</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">htmlDate</span> <span class="o">=</span> <span class="nx">dates</span><span class="p">[</span><span class="nx">counter</span><span class="p">];</span>
      <span class="kd">var</span> <span class="nx">dateArray</span> <span class="o">=</span> <span class="nx">htmlDate</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="sr">/</span><span class="se">[^</span><span class="sr">0-9</span><span class="se">]</span><span class="sr">/</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">localDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span>
        <span class="nb">Date</span><span class="p">.</span><span class="nx">UTC</span><span class="p">(</span><span class="nx">dateArray</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">dateArray</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
      <span class="p">);</span>
      <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">localDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">localDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">monthIndex</span> <span class="o">=</span> <span class="nx">localDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span>
      <span class="nx">htmlDate</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">monthNames</span><span class="p">[</span><span class="nx">monthIndex</span><span class="p">]</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">day</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">, </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">year</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">};</span>
  <span class="nx">showDatesInLocalTime</span><span class="p">();</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>I‚Äôm hiding a lot of the effort this took me‚Ä¶ don‚Äôt get me wrong, it took me what felt like <em>hours</em> to develop this method, and I‚Äôm still finding bugs in it ü¶ü.</p>

<h3 id="5Ô∏è-dont-show-the-published-date-in-the-url-of-the-blog-posts">5Ô∏è. Don‚Äôt show the published date in the URL of the blog posts</h3>

<p>In our example, I published a post on the 17th of January at night in CST. But we see now, that if I travel to France and look back at past blog posts, it‚Äôll look as if it was published on the 18th of January. BUT, the URL of the blog post will include the published date. See an example below:</p>

<div class="text-center">
  <a data-flickr-embed="true" href="https://www.flickr.com/photos/184539266@N08/49498384557/in/album-72157710863695862/" title="Link to blog post including the date"><img class="my-image" src="https://live.staticflickr.com/65535/49498384557_42bd218c3d.jpg" width="500" height="31" alt="Link to blog post including the date" /></a>
</div>

<p>If the date the site is showing the reader is moving around depending on the readers‚Äô location, then this is confusing‚Äîthe URL date won‚Äôt change!</p>

<p>If I‚Äôm honest, having the date in the URL was never my favorite thing‚Ä¶ it always bugged me. I just never cared quite enough to change it, and to deal with the redirects I‚Äôd have to set up. But given this inconsistency, I decided that I finally cared enough to make the shift ‚Ü™.</p>

<p>I added the <code class="highlighter-rouge">jekyll-redirect-from</code> plugin to my <code class="highlighter-rouge">_config.yml</code>. And from there, redirecting is actually quite easy. In the front matter of each blog post, I add the new URL of the blog post, and then redirect to the new URL from the old URL:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">permalink</span><span class="pi">:</span> <span class="s">/blog/posts/opening-links-in-new-tabs-via-javascript/</span>
<span class="na">redirect_from</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">/blog/posts/2020-01-14-opening-links-in-new-tabs-via-javascript/</span>
</code></pre></div></div>

<p>Now, when I navigate to my blog posts at the old URL, my browser automatically redirects to the new URL. Hopefully that prevents my SEO ranking from going down üò¨.</p>

<h2 id="conclusion">Conclusion</h2>

<p>At the end of the day, this goal maybe wasn‚Äôt too hefty. It maybe took about six hours of total effort. I haven‚Äôt traveled yet to see if it works as expected, but I have a trip planned in about a month, so we‚Äôll see then ü§∑üèª‚Äç‚ôÄÔ∏è.</p>

<p>The moral of the story is that time zones are complicated, but the most robust websites will take them into account. If your website has date/times, then you should show them to your users in their local times, if possible. And you should be careful when storing data with date/times to make sure they are all stored in the same time zone, so they don‚Äôt get conflicted.</p>

<p>I‚Äôm still working on perfecting my time zone processing. It‚Äôs complicated, and not all browsers react the same way to Javascript (who knew, right ¬Ø\_(„ÉÑ)_/¬Ø). But, I‚Äôd strongly urge to you take the plunge on your website‚Ä¶ it‚Äôll be worth it when your blog becomes internationally popular üòú.</p>

<hr />

<p>EDIT: Since writing this blog post, I‚Äôve moved my default branch to be <code class="highlighter-rouge">source</code>, instead of <code class="highlighter-rouge">release</code>. I originally named it <code class="highlighter-rouge">release</code> because the documentation I was following named it that, but realized later that the name <code class="highlighter-rouge">source</code> fit my workflow better.</p>

      <div style="margin-top: 3rem;">
  
    <script src="/js/show-comments.js" type="text/javascript"></script>

    <div class="text-center" style="margin-bottom: 1rem;">
      <button id="show-comments-button" class="btn btn-lg btn-outline-secondary"
  onclick="loadComments('emmasax4');return false;">
  Load Comments
  <i data-feather="message-circle"></i>
</button>

    </div>

    <div id="disqus_thread"></div>

    <noscript>
      Please enable JavaScript to view the
      <a href="https://disqus.com/?ref_noscript" rel="nofollow">
        comments powered by Disqus.
      </a>
    </noscript>
  
</div>

    </div>
  </div>
</div>

    </main>
  </body>

  <footer>
  &copy; 2015‚Äì<script>document.write(new Date().getFullYear());</script>
  Emma Sax. All rights reserved.
  View on <a href="https://github.com/emma-sax4/emma-sax4.github.io">GitHub</a>.
</footer>

  <script src="/js/show-dates.js" type="text/javascript"></script>
<script src="/js/external-links.js" type="text/javascript"></script>
<script src="https://unpkg.com/feather-icons@4.25.0/dist/feather.min.js"></script>
<script>feather.replace()</script>

<script
  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
  crossorigin="anonymous">
</script>

<script
  src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
  integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
  crossorigin="anonymous">
</script>

</html>
