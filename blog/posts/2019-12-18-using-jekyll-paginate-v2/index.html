<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Emma Sax"/>
  <link rel="shortcut icon" type="image/x-icon" href="/assets/images/e_logo_blue_196.png">
  <link href="https://emmasax4.info/feed.xml" title="Emma Sax's Blog" rel="alternate" type="application/rss+xml">

  <title>Emma Sax | Platform Operations Engineer</title>

  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
    crossorigin="anonymous"
  >
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:400,700"
    rel="stylesheet"
    type="text/css"
  >
  <link rel="stylesheet" href="/assets/css/style.css">
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Using jekyll-paginate-v2 | Emma‚Äôs Website and Blog</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Using jekyll-paginate-v2" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="@BrianMitchL" />
<meta property="og:description" content="@BrianMitchL" />
<link rel="canonical" href="https://emmasax4.info/blog/posts/2019-12-18-using-jekyll-paginate-v2/" />
<meta property="og:url" content="https://emmasax4.info/blog/posts/2019-12-18-using-jekyll-paginate-v2/" />
<meta property="og:site_name" content="Emma‚Äôs Website and Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-18T00:00:00+00:00" />
<meta name="google-site-verification" content="v04az8eo-0UcZrWCJr7SKAvM6hw90qTCBQoKx3PlXCA" />
<meta name="msvalidate.01" content="89B2B19FF966341B78EF64EDADE6DF81" />
<meta name="yandex-verification" content="c2741887f8c30dd1" />
<script type="application/ld+json">
{"headline":"Using jekyll-paginate-v2","description":"@BrianMitchL","datePublished":"2019-12-18T00:00:00+00:00","dateModified":"2019-12-18T00:00:00+00:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://emmasax4.info/blog/posts/2019-12-18-using-jekyll-paginate-v2/"},"url":"https://emmasax4.info/blog/posts/2019-12-18-using-jekyll-paginate-v2/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

  <header>
  <nav class="navbar navbar-expand-md navbar-dark">
    <a class="navbar-brand mb-0" href="https://emmasax4.info">
      <img src="/assets/images/e_logo_white_40.png" width="30" height="30" class="d-inline-block align-top" alt="E logo"> Emma Sax
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-links" aria-controls="navbar-links" aria-expanded="false" aria-label="Toggle navigation">
      <span data-feather="menu"></span>
      <span data-feather="x"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbar-links">
      <ul class="navbar-nav ml-auto mt-2 mt-md-0">
        

        
          
            

            

            <li class="nav-item ">
              <a class="nav-link" href="/">Home
                
              </a>
            </li>
          
        
          
            

            

            <li class="nav-item ">
              <a class="nav-link" href="/about-me/">About Me
                
              </a>
            </li>
          
        
          
            

            

            <li class="nav-item ">
              <a class="nav-link" href="/around-town/">Around Town
                
              </a>
            </li>
          
        
          
            

            

            <li class="nav-item active">
              <a class="nav-link" href="/blog">Blog
                
                  <span class="sr-only">(current)</span>
                
              </a>
            </li>
          
        
          
        
          
        
          
        
          
        
          
            

            

            <li class="nav-item ">
              <a class="nav-link" href="/contact-me/">Contact Me
                
              </a>
            </li>
          
        
      </ul>
    </div>
  </nav>
</header>


  <body>
    <main class="container">
      <div class="row">
  <div class="col col-12 col-md-2 text-center">
    <div class="container" style="padding-bottom: 1rem;">
  <a href="/blog" class="btn btn-lg btn-outline-secondary">All Posts</a>
</div>


    <div class="text-center" style="margin-bottom: 1rem;">
      <a href="/feed.xml" target="_blank" class="link-icon-rss">
  <i data-feather="rss"></i>
</a>

    </div>
  </div>

  <div class="col col-12 col-md-10">
    <h1>
  <div class="text-center">
    
      Using <header-code>jekyll-paginate-v2</header-code>
    
  </div>

  <div class="text-center">
    <span class="post-meta" style="font-style: italic; margin-top: -1rem; margin-bottom: -1rem;">
      
        Published December 18, 2019
      
    </span>
  </div>

  <div class="text-center" style="margin-top: -1rem; margin-bottom: -1rem;">
    
      
      
  <span class="post-meta">
    <i style="width: 20px; height: 20px;" data-feather="tag"></i>
    
      

      <a href="/blog/jekyll">jekyll</a>
      
        |
      
    
      

      <a href="/blog/tech">tech</a>
      
    
  </span>


    
  </div>
</h1>

    <div class="page-body">
      <p><a href="https://twitter.com/BrianMitchL" class="user-mention">@BrianMitchL</a></p>

<hr>

<p>A couple of weeks ago, I started the endeavor of adding Bootstrap to this website. You can read more about how this repository uses Bootstrap, and how to add Bootstrap to a static content site <a href="/blog/posts/2019-12-17-adding-bootstrap-to-your-static-content-site/">here</a>.</p>

<p>But, soon after I started getting an upgrade in my CSS game, I realized that my pagination bar on my blog site was sorely outdated üò¢. At one point, I had the nerve to call this pagination bar beautiful:</p>

<div class="text-center">
  <a data-flickr-embed="true" href="https://www.flickr.com/photos/184539266@N08/48741504061/in/album-72157710863695862/" title="lovely_pagination_bar"><img class="my-image" src="https://live.staticflickr.com/65535/48741504061_7ebbd630fa.jpg" width="450" height="311" alt="Lovely pagination bar"></a>
</div>

<p>But since completely revamping the whole looks of the site, this pagination bar was no longer acceptable. It was old fashioned, wouldn‚Äôt remember the page you were on if you navigated forward and back in your browser, and didn‚Äôt have pretty buttons. It was time for me to look into alternate pagination options.</p>

<p>I build and serve this site with GitHub Pages. Their built-in pagination suggestion is <a href="https://github.com/jekyll/jekyll-paginate" target="_blank"><code class="highlighter-rouge">jekyll-paginate</code></a>. But, it very clearly states that <code class="highlighter-rouge">jekyll-paginate</code> is no longer supported. The recommended newer version of Jekyll pagination is <a href="https://github.com/sverrirs/jekyll-paginate-v2" target="_blank"><code class="highlighter-rouge">jekyll-paginate-v2</code></a>.</p>

<p>I had considered <code class="highlighter-rouge">jekyll-paginate-v2</code> before, and I briefly mentioned it in <a href="/blog/posts/2019-09-12-adding-pagination-without-jekyll/" target="_blank">this blog post</a>. At that time, I didn‚Äôt want to make the necessary changes to my directory structure, and I‚Äôd have to be willing to either add a trailing <code class="highlighter-rouge">/</code> to the end of my URLs, or I‚Äôd have to be okay with some of my pages having that trailing <code class="highlighter-rouge">/</code>, and some not to, which I wasn‚Äôt okay with.</p>

<p>From a technical standpoint, it doesn‚Äôt really matter to the browser whether you write a <code class="highlighter-rouge">/</code> on the end of your URL or not; they resolve to the same host. There‚Äôs more detailed reasons why or why to have a trailing <code class="highlighter-rouge">/</code> on a URL, but the gist is that the <code class="highlighter-rouge">/</code> delineates a directory, which then would have files in it: <code class="highlighter-rouge">https://example.com/directory/</code> and then <code class="highlighter-rouge">https://example.com/directory/file.html</code> ü§∑üèª‚Äç‚ôÄÔ∏è.</p>

<p>In fact, my reading said that although having URLs without <code class="highlighter-rouge">/</code> is the newer, more popular thing, traditionalists would actually pretty much only have <em>either</em> the trailing <code class="highlighter-rouge">/</code> <em>or</em> the extension (the <code class="highlighter-rouge">.html</code> in the above example) in the URL. So if I‚Äôm to follow these guidelines, then I probably should add the trailing <code class="highlighter-rouge">/</code> to the end of all of my URLs except the home page.</p>

<p>I could continue doing research, trying to decide what other pagination options to explore. But I figured that if I wanted to get anything easy done reasonably soon, I‚Äôd have to just be okay with compromising on the trailing <code class="highlighter-rouge">/</code>.</p>

<p>So after admitting that I‚Äôd need to accept the trailing <code class="highlighter-rouge">/</code>, I proceeded to set up <code class="highlighter-rouge">jekyll-paginate-v2</code> on my repository. How hard could it be? üòÜ</p>

<p>I started by following the <a href="https://github.com/sverrirs/jekyll-paginate-v2#installation" target="_blank">installation instructions</a>. But, as you‚Äôll understand later, I got only got through the second line in that section; I never finished reading that doc.</p>

<p>Instead, I jumped right into the work, copy-pasting the basics of the needed configuration into my config file, before realizing that although there‚Äôs lots of documentation in this repo, they never quite clarify that your main <code class="highlighter-rouge">Blog</code> page needs to be in a <code class="highlighter-rouge">./blog/index.html</code> file. Furthermore, they never actually say that your blog posts need to be in a <code class="highlighter-rouge">_posts/</code> directory. Luckily, I poked around the examples enough to figure that out.</p>

<p>Thanks to <a href="https://gist.github.com/alialo/2255511" target="_blank">this gist</a>, I was able to get the basic code of a simple pagination bar going right away. In fact, getting the main <code class="highlighter-rouge">Blog</code> page paginating wasn‚Äôt too hard at all!</p>

<p>But, I also wanted to make sure that I could paginate my sub-pages‚Äîbasically filtering my posts based on tag names and set names. On my site, an example of a tag name is <code class="highlighter-rouge">tech</code> and an example of a set name is <code class="highlighter-rouge">Welcome to Kenya</code>. The distinction between the two is that a blog post can have multiple tag names, and they should be one word long. But a blog post can only be a part of one set, and the name can be multiple words with capitalization.</p>

<p>Filtering posts proved to be a little bit more complicated than just paginating <em>all</em> of the posts. The documentation for <code class="highlighter-rouge">jekyll-paginate-v2</code> describes filtering based on what they call "tags" and "categories". So I started with a single tag, because I wasn‚Äôt quite sure yet how to deal with the sets. After I added the first bit of code to the tag‚Äôs filter, I realized that the documentation never properly mentioned in what <em>directory</em> I should put my filter‚Äôs file. I tried at least four different places I should put it. It wasn‚Äôt until my last idea when I realized that it had to be placed in the same <code class="highlighter-rouge">blog/</code> directory as the <code class="highlighter-rouge">index.html</code>. But, as soon as I moved my tag file into the directory, so it looked like <code class="highlighter-rouge">blog/tag.html</code>, then it worked miraculously.</p>

<p>It was then easy to move all of the tags to have the same pattern. Moving to the "set", I had more issues, mainly with 1) figuring out the best way to paginate the filtered pages, and 2) <code class="highlighter-rouge">jekyll-paginate-v2</code> couldn‚Äôt be formatted to work with filtering a <code class="highlighter-rouge">set</code> (only <code class="highlighter-rouge">tags</code>, <code class="highlighter-rouge">categories</code>, and <code class="highlighter-rouge">locales</code>, which is languages). So, I had to write my code as if my <code class="highlighter-rouge">set</code> was a <code class="highlighter-rouge">category</code> instead. This meant changing several variable names, and in general renaming files and calls to have the word "category" instead of "set". In fact, by the end of the night, I had changed almost every reference to a "set" in the whole codebase üòù.</p>

<p>In fact, by the time I was done for the day, I had pretty much decided to just do-away with the whole notion of a "set" and turn it into a "category" instead. Actually I like the word "collection" more than a "category", so in the codebase it‚Äôs a "category", in my head it‚Äôs a "collection", and to an end user of this site, they all look like "tags". So then, I did a <em>huge</em> find/replace of the word <code class="highlighter-rouge">set</code> and replaced it with the word <code class="highlighter-rouge">category</code>.</p>

<p>Despite all of this work, now every single tag and category filters blog posts properly. The last secret to getting pagination working on those pages is that I needed to save the URL of the filtered page: aka <code class="highlighter-rouge">/blog/welcome-to-kenya</code> or <code class="highlighter-rouge">/blog/tech</code>. And this way, we could append the page count number to the end of that: <code class="highlighter-rouge">/blog/welcome-to-kenya/4/</code> or <code class="highlighter-rouge">/blog/tech/2/</code>.</p>

<p>After all of that work, I now have a pagination bar that makes me proud of this website. Just add in a few more pretty icons, and I‚Äôm satisfied üòÅ.</p>

<div class="text-center">
  <a data-flickr-embed="true" href="https://www.flickr.com/photos/184539266@N08/49241327792/in/album-72157710863695862/" title="Bootstrap Pagination"><img class="my-image" src="https://live.staticflickr.com/65535/49241327792_44bf877bcb.jpg" width="500" height="304" alt="Bootstrap Pagination"></a>
</div>

<hr>

<p>Haha! You thought the story was over, didn‚Äôt you? Well‚Ä¶ as soon as I merged in my pull request to add the new pagination, I realized something. That paragraph of the installation instructions that I <em>didn‚Äôt</em> finish? Well, the ending part of it warned that <code class="highlighter-rouge">jekyll-pagination-v2</code> is <em>not</em> supported by GitHub Pages. This means that when somebody runs the code locally on their computer, they can use <code class="highlighter-rouge">jekyll-pagination-v2</code> to their hearts‚Äô content, and the site will load properly. But GitHub‚Äôs servers (which normally build the site for me), will not properly execute <code class="highlighter-rouge">jekyll-pagination-v2</code>, and there‚Äôs no way to compile the pagination code properly without that.</p>

<p>If I had just <em>finished</em> that section, I could‚Äôve saved me a whole 30 minutes where the site wasn‚Äôt broken, and potentially even saved myself a little headache. But at this point, I‚Äôve come too far to turn back around and go back to my old-fashioned pagination. So, Google came to the rescue.</p>

<p>It turns out (surprise surprise) I‚Äôm not the first person to run into this issue. There‚Äôs a <a href="https://github.com/sverrirs/jekyll-paginate-v2/issues/9" target="_blank">whole discussion</a> that‚Äôs going on about this topic, and trying to integrate <code class="highlighter-rouge">jekyll-paginate-v2</code> with GitHub Pages eventually, but it hasn‚Äôt made any progress lately. But, I did get some ideas from the discussion. Here are my options of how to proceed:</p>

<ol>
  <li>After I finish making any changes to my site, I can commit my new source code to GitHub, bundle the project on my own computer, and then upload the bundled site to a <em>separate</em> branch in GitHub and have GitHub Pages deploy only <em>that</em> branch.</li>
  <li>I can switch to use the GitHub Pages supported <code class="highlighter-rouge">jekyll-paginate</code> and let GitHub Pages properly paginate my blog posts.</li>
</ol>

<p>I started with the second approach. But after some more research, I learned that <code class="highlighter-rouge">jekyll-paginate</code> doesn‚Äôt allow for the filtering of tags and collections, which my site was heavily relying on. Therefore, to use <code class="highlighter-rouge">jekyll-paginate</code> would involve completely redoing my site, and several more hours‚Äô work.</p>

<p>Now, I‚Äôm not a fan of needing my site to have to be built on a person‚Äôs computer to work properly. It‚Äôs never a good idea to have a website‚Äôs deployment rely on a person‚Äôs physical computer (which could break, have compilation issues, or generally just not be available). But I figured that other people had run into this issue with <code class="highlighter-rouge">jekyll-paginate-v2</code> and GitHub Pages, and I‚Äôm sure somebody wrote a blog post about it (similarly to like I‚Äôm doing now). So I looked up different ways to combat this issue. The blog post I found was <a href="https://medium.com/@mcred/supercharge-github-pages-with-jekyll-and-travis-ci-699bc0bde075" target="_blank">this</a>. I owe my entire pagination to <em>that blog post</em>.</p>

<p>Basically what Derek Smart (I wonder if that‚Äôs his real name üßê) suggests is to go with the first approach, but don‚Äôt bundle the project on <em>your</em> machine‚Ä¶ use a continuous deployment tool. And here comes Travis CI.</p>

<p>From Travis CI‚Äôs documentation,</p>
<blockquote>
  <p>Continuous Integration is the practice of merging in small code changes frequently - rather than merging in a large change at the end of a development cycle. The goal is to build healthier software by developing and testing in smaller increments. This is where Travis CI comes in.<br><br>As a continuous integration platform, Travis CI supports your development process by automatically building and testing code changes, providing immediate feedback on the success of the change. Travis CI can also automate other parts of your development process by managing deployments and notifications.</p>
</blockquote>

<p>The ending part of that statement is important:</p>
<blockquote>
  <p>Travis CI can‚Ä¶ [manage] deployments and notifications.</p>
</blockquote>

<p>So, we could (in theory) make a change to the source code in GitHub, and then have Travis CI build my website and "deploy" it to GitHub Pages. And, it turns out my site was already using Travis CI to test the Jekyll build process on every commit to the <code class="highlighter-rouge">master</code> branch. So, I only had to add a few lines to have Travis CI <em>also</em> deploy my changes:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>script:
  - JEKYLL_ENV=production bundle exec jekyll build --destination ./site

deploy:
  provider: pages
  local-dir: ./site
  target-branch: master
  email: deploy@travis-ci.org
  name: Deployment Bot
</code></pre></div></div>

<p>The <code class="highlighter-rouge">script</code> section asks Travis CI to build the site to the <code class="highlighter-rouge">site</code> destination directory. The <code class="highlighter-rouge">deploy</code> section tells Travis CI to run a deploy to the GitHub Pages provider with the <code class="highlighter-rouge">./site</code> directory, on the target branch <code class="highlighter-rouge">master</code>, and which GitHub user to use (in this case, <code class="highlighter-rouge">Deployment Bot</code> with the email <code class="highlighter-rouge">deploy@travis-ci.org</code>). There are a few other little pieces to get it working properly, but you can check out my <a href="https://github.com/emma-sax4/emma-sax4.github.io/blob/release/.travis.yml" target="_blank"><code class="highlighter-rouge">.travis.yml</code> file</a> if you want to see more. I did need to make a new branch in GitHub‚Äîthe <code class="highlighter-rouge">release</code> branch. The idea here is that the <code class="highlighter-rouge">release</code> branch is used for me to store my source code for this site, and the <code class="highlighter-rouge">master</code> branch is for GitHub Pages to deploy. Only the fully compiled and bundled site lives on the <code class="highlighter-rouge">master</code> branch.</p>

<p>It‚Äôs a little complicated, but, one deploy from Travis CI later, and the site was up and running again. <em>AND</em> I had the pagination option of my choosing that had all of the functionality I could ever want.</p>

<div class="text-center">
  <iframe class="my-image giphy-embed" src="https://giphy.com/embed/4xpB3eE00FfBm" width="480" height="458" frameborder="0" allowfullscreen=""></iframe><p><a href="https://giphy.com/gifs/mrw-week-job-4xpB3eE00FfBm" target="_blank">via GIPHY</a></p>
</div>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://github.com/sverrirs/jekyll-paginate-v2/blob/master/README-GENERATOR.md" target="_blank">github.com: jekyll-paginate-v2, README-GENERATOR</a></li>
  <li><a href="https://github.com/sverrirs/jekyll-paginate-v2" target="_blank">github.com: jekyll-paginate-v2</a></li>
  <li><a href="https://stackoverflow.com/questions/5948659/when-should-i-use-a-trailing-slash-in-my-url" target="_blank">stackoverflow.com: when should I use a trailing slash in my URL</a></li>
  <li><a href="https://searchfacts.com/url-trailing-slash/" target="_blank">searchfacts.com: url trailing slash</a></li>
  <li><a href="https://gist.github.com/alialo/2255511" target="_blank">gist.github.com: alialo/2255511</a></li>
  <li><a href="https://medium.com/@mcred/supercharge-github-pages-with-jekyll-and-travis-ci-699bc0bde075" target="_blank">medium.com: supercharge github pages with jekyll and travis ci</a></li>
  <li><a href="https://docs.travis-ci.com/user/for-beginners/" target="_blank">docs.travis-ci.com: for beginners</a></li>
</ul>

      <div style="margin-top: 3rem;">
  
    <div class="text-center" style="margin-bottom: 1rem;">
      <button id="show-comments-button" class="btn btn-lg btn-outline-secondary" onclick="loadComments();return false;">
        Load Comments
        <i data-feather="message-circle"></i>
      </button>
    </div>

    <div id="disqus_thread"></div>

    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

    <script type="text/javascript">
      var disqus_loaded = false;
      var disqus_shortname = 'emmasax4';

      function loadComments() {
        if (!disqus_loaded) {
          disqus_loaded = true;
          (function() {
            var d = document,
              s = d.createElement('script');
            s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
          document.getElementById('show-comments-button').remove();
        }
      }
    </script>
  
</div>

    </div>
  </div>
</div>

    </main>
  </body>

  <footer>
  &copy; <script>new Date().getFullYear()>2010&&document.write(" "+new Date().getFullYear());</script> by
    <a href="https://github.com/emma-sax4" target="_blank">Emma Sax</a>.
  All rights reserved.
  View on <a href="https://github.com/emma-sax4/emma-sax4.github.io" target="_blank">GitHub</a>.
</footer>

  <script src="https://unpkg.com/feather-icons">
</script>
<script>
  feather.replace()
</script>
<script
  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
  crossorigin="anonymous">
</script>
<script
  src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
  integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
  crossorigin="anonymous">
</script>

</html>
